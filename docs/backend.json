{
  "entities": {
    "Employee": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Employee",
      "type": "object",
      "description": "Represents an employee profile within the HR system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the employee."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the employee."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the employee."
        },
        "email": {
          "type": "string",
          "description": "The email address of the employee.",
          "format": "email"
        },
        "jobTitle": {
          "type": "string",
          "description": "The job title of the employee."
        },
        "department": {
          "type": "string",
          "description": "The department the employee belongs to."
        },
        "dateOfJoining": {
          "type": "string",
          "description": "The date when the employee joined the company.",
          "format": "date-time"
        },
        "employeeStatus": {
          "type": "string",
          "description": "Employee working status"
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "jobTitle",
        "department",
        "dateOfJoining"
      ]
    },
    "Attendance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Attendance",
      "type": "object",
      "description": "Represents employee attendance records.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the attendance record."
        },
        "employeeId": {
          "type": "string",
          "description": "Reference to Employee. (Relationship: Employee 1:N Attendance)"
        },
        "date": {
          "type": "string",
          "description": "The date of the attendance record.",
          "format": "date-time"
        },
        "checkInTime": {
          "type": "string",
          "description": "The time when the employee checked in."
        },
        "checkOutTime": {
          "type": "string",
          "description": "The time when the employee checked out."
        },
        "hoursWorked": {
          "type": "number",
          "description": "The total hours worked by the employee on that day."
        }
      },
      "required": [
        "id",
        "employeeId",
        "date",
        "checkInTime",
        "checkOutTime"
      ]
    },
    "LeaveRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LeaveRequest",
      "type": "object",
      "description": "Represents employee leave requests.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the leave request."
        },
        "employeeId": {
          "type": "string",
          "description": "Reference to Employee. (Relationship: Employee 1:N LeaveRequest)"
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the leave.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The end date of the leave.",
          "format": "date-time"
        },
        "leaveType": {
          "type": "string",
          "description": "The type of leave requested (e.g., sick leave, vacation)."
        },
        "reason": {
          "type": "string",
          "description": "The reason for the leave request."
        },
        "status": {
          "type": "string",
          "description": "The status of the leave request (e.g., pending, approved, rejected)."
        }
      },
      "required": [
        "id",
        "employeeId",
        "startDate",
        "endDate",
        "leaveType",
        "status"
      ]
    },
    "Payroll": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payroll",
      "type": "object",
      "description": "Represents payroll information for employees.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the payroll record."
        },
        "employeeId": {
          "type": "string",
          "description": "Reference to Employee. (Relationship: Employee 1:N Payroll)"
        },
        "payPeriodStartDate": {
          "type": "string",
          "description": "The start date of the pay period.",
          "format": "date-time"
        },
        "payPeriodEndDate": {
          "type": "string",
          "description": "The end date of the pay period.",
          "format": "date-time"
        },
        "grossSalary": {
          "type": "number",
          "description": "The gross salary of the employee for the pay period."
        },
        "netSalary": {
          "type": "number",
          "description": "The net salary of the employee after deductions."
        },
        "deductions": {
          "type": "number",
          "description": "The total deductions from the salary (e.g., taxes, insurance)."
        },
        "taxDeductions": {
          "type": "number",
          "description": "The tax deductions from the salary."
        }
      },
      "required": [
        "id",
        "employeeId",
        "payPeriodStartDate",
        "payPeriodEndDate",
        "grossSalary",
        "netSalary",
        "deductions"
      ]
    },
    "Resume": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Resume",
      "type": "object",
      "description": "Stores information extracted from a resume.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resume."
        },
        "candidateName": {
          "type": "string",
          "description": "Name of the candidate."
        },
        "email": {
          "type": "string",
          "description": "Candidate's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Candidate's phone number."
        },
        "experience": {
          "type": "string",
          "description": "Candidate's work experience."
        },
        "skills": {
          "type": "array",
          "description": "Candidate's skills.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "candidateName",
        "email",
        "phone"
      ]
    },
    "ChatMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ChatMessage",
      "type": "object",
      "description": "Represents a message in the HR Helpdesk Chatbot.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the message."
        },
        "employeeId": {
          "type": "string",
          "description": "Reference to Employee. (Relationship: Employee 1:N ChatMessage)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of the message.",
          "format": "date-time"
        },
        "messageText": {
          "type": "string",
          "description": "Text content of the message."
        },
        "isAgent": {
          "type": "boolean",
          "description": "Indicates whether the message was sent by an HR agent."
        }
      },
      "required": [
        "id",
        "employeeId",
        "timestamp",
        "messageText",
        "isAgent"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/employees/{employeeId}",
        "definition": {
          "entityName": "Employee",
          "schema": {
            "$ref": "#/backend/entities/Employee"
          },
          "description": "Stores employee profile information. The 'employeeId' parameter is the unique identifier for each employee.",
          "params": [
            {
              "name": "employeeId",
              "description": "Unique identifier for the employee."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}/attendance/{attendanceId}",
        "definition": {
          "entityName": "Attendance",
          "schema": {
            "$ref": "#/backend/entities/Attendance"
          },
          "description": "Stores attendance records for each employee. Organized as a subcollection of 'employees' for ownership. The 'employeeId' parameter specifies the employee, and 'attendanceId' is the unique ID for the attendance record.",
          "params": [
            {
              "name": "employeeId",
              "description": "Unique identifier for the employee."
            },
            {
              "name": "attendanceId",
              "description": "Unique identifier for the attendance record."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}/leaveRequests/{leaveRequestId}",
        "definition": {
          "entityName": "LeaveRequest",
          "schema": {
            "$ref": "#/backend/entities/LeaveRequest"
          },
          "description": "Stores leave requests for each employee. Organized as a subcollection of 'employees' for ownership. The 'employeeId' parameter specifies the employee, and 'leaveRequestId' is the unique ID for the leave request.",
          "params": [
            {
              "name": "employeeId",
              "description": "Unique identifier for the employee."
            },
            {
              "name": "leaveRequestId",
              "description": "Unique identifier for the leave request."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}/payroll/{payrollId}",
        "definition": {
          "entityName": "Payroll",
          "schema": {
            "$ref": "#/backend/entities/Payroll"
          },
          "description": "Stores payroll information for each employee. Organized as a subcollection of 'employees' for ownership. The 'employeeId' parameter specifies the employee, and 'payrollId' is the unique ID for the payroll record.",
          "params": [
            {
              "name": "employeeId",
              "description": "Unique identifier for the employee."
            },
            {
              "name": "payrollId",
              "description": "Unique identifier for the payroll record."
            }
          ]
        }
      },
      {
        "path": "/resumes/{resumeId}",
        "definition": {
          "entityName": "Resume",
          "schema": {
            "$ref": "#/backend/entities/Resume"
          },
          "description": "Stores resume data. The 'resumeId' parameter is the unique identifier for each resume.",
          "params": [
            {
              "name": "resumeId",
              "description": "Unique identifier for the resume."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}/chatMessages/{chatMessageId}",
        "definition": {
          "entityName": "ChatMessage",
          "schema": {
            "$ref": "#/backend/entities/ChatMessage"
          },
          "description": "Stores chat messages for each employee. Organized as a subcollection of 'employees' for ownership and chronological ordering. The 'employeeId' parameter specifies the employee, and 'chatMessageId' is the unique ID for the message.",
          "params": [
            {
              "name": "employeeId",
              "description": "Unique identifier for the employee."
            },
            {
              "name": "chatMessageId",
              "description": "Unique identifier for the chat message."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support SynergyHR's core features while adhering to the principles of Authorization Independence, Structural Segregation, and Access Modeling. Employee data and associated subcollections (Attendance, Leave Requests, Payroll, and Chat Messages) are organized under the `/employees/{employeeId}` path to establish clear ownership and simplify security rules. Each subcollection is structured to be authorization independent by avoiding `get()` calls in rules. This is achieved using path-based ownership where access is implicitly granted based on the employee ID in the path. This approach ensures atomic operations and easy debugging.\n\nThe `resumes` collection stores resume data, separated from employee data to ensure different access controls can be applied. The structure supports the required QAPs by segregating data into collections based on their access needs, allowing for secure list operations. Each employee \"owns\" their data and only they can access it."
  }
}